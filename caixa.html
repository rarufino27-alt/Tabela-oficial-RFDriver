<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Livro Caixa ‚Äì RF Driver</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f4f7fb;
  --blue:#0b2238;
  --blue-soft:#12355b;
  --gold:#d4af37;
  --gold-light:#e6c97a;
  --green:#1db954;
  --red:#d9534f;
  --card:#ffffff;
  --border:#dce3ed;
  --text:#0b1b2b;
}

*{box-sizing:border-box;font-family:Inter,system-ui,Arial}

body{
  margin:0;
  background:linear-gradient(180deg,#ffffff,var(--bg));
  color:var(--text);
  padding:20px;
}

.container{
  max-width:420px;
  margin:auto;
  display:flex;
  flex-direction:column;
  gap:16px;
}

/* HEADER */
.header{
  background:linear-gradient(180deg,var(--blue),var(--blue-soft));
  color:#fff;
  border-radius:22px;
  padding:20px;
  text-align:center;
  box-shadow:0 14px 36px rgba(0,0,0,.35);
}

.header h1{
  margin:0;
  font-size:1.4rem;
  letter-spacing:2px;
  background:linear-gradient(120deg,var(--gold),var(--gold-light),var(--gold));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.header small{color:#e6ecf3}

/* SALDO */
.saldo{
  background:var(--card);
  border-radius:20px;
  padding:18px;
  text-align:center;
  box-shadow:0 8px 22px rgba(0,0,0,.08);
}

.saldo strong{
  display:block;
  font-size:2rem;
  color:var(--gold);
}

/* TABS */
.tabs{
  display:flex;
  gap:8px;
}

.tabs button{
  flex:1;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fff;
  font-weight:700;
}

.tabs button.active{
  background:linear-gradient(145deg,var(--gold-light),var(--gold));
  color:#0b1b2b;
}

/* CARD */
.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}

label{
  font-size:.8rem;
  font-weight:700;
  margin-bottom:4px;
  display:block;
}

input,select{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:14px;
  border:1px solid var(--border);
}

/* BOT√ïES */
.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  font-weight:800;
}

.btn-green{background:var(--green);color:#fff}
.btn-red{background:var(--red);color:#fff}
.btn-gold{
  background:linear-gradient(145deg,var(--gold-light),var(--gold));
  color:#0b1b2b
}

/* HIST√ìRICO */
.item{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
  font-size:.85rem;
}

/* RESUMO */
.resumo-box{
  background:linear-gradient(180deg,var(--blue),var(--blue-soft));
  color:#fff;
  border-radius:22px;
  padding:18px;
}

.resumo-box strong{color:var(--gold)}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h1>LIVRO CAIXA</h1>
    <small>RF Driver ‚Äì Controle di√°rio</small>
  </div>

  <div class="saldo">
    Saldo do dia
    <strong id="saldo">R$ 0,00</strong>
  </div>

  <div class="tabs">
    <button class="active" onclick="abrirTab('corridas',this)">Corridas</button>
    <button onclick="abrirTab('entradas',this)">Entradas</button>
    <button onclick="abrirTab('saidas',this)">Sa√≠das</button>
    <button onclick="abrirTab('resumo',this)">Resumo</button>
  </div>

  <!-- CORRIDAS -->
  <div class="card tab corridas">
    <label>Tipo de corrida</label>
    <select id="tipoCorrida">
      <option>Aplicativo</option>
      <option>Particular</option>
      <option>Empresa</option>
    </select>

    <label>Plataforma</label>
    <select id="plataforma">
      <option>Uber</option>
      <option>99</option>
      <option>InDrive</option>
      <option>Outros</option>
    </select>

    <input type="number" id="valorCorrida" placeholder="Valor da corrida">
    <button class="btn btn-green" onclick="registrarCorrida()">Registrar Corrida</button>
  </div>

  <!-- ENTRADAS -->
  <div class="card tab entradas" style="display:none">
    <input type="text" id="descEntrada" placeholder="Descri√ß√£o">
    <input type="number" id="valorEntrada" placeholder="Valor">
    <button class="btn btn-green" onclick="registrarEntrada()">Registrar Entrada</button>
  </div>

  <!-- SA√çDAS -->
  <div class="card tab saidas" style="display:none">
    <select id="tipoSaida">
      <option>Combust√≠vel</option>
      <option>Alimenta√ß√£o</option>
      <option>Manuten√ß√£o</option>
      <option>Outros</option>
    </select>
    <input type="number" id="valorSaida" placeholder="Valor">
    <button class="btn btn-red" onclick="registrarSaida()">Registrar Sa√≠da</button>
  </div>

  <!-- RESUMO -->
  <div class="card tab resumo" style="display:none">
    <div class="resumo-box" id="resumoBox"></div>
    <button class="btn btn-gold" onclick="exportarWhats()">üì≤ Exportar WhatsApp</button>
    <button class="btn btn-gold" onclick="fecharDia()">Finalizar Dia</button>
  </div>

</div>

<script>
const LS_ATUAL="rf_caixa_atual";
const LS_HIST="rf_caixa_historico";

let caixa = JSON.parse(localStorage.getItem(LS_ATUAL)) || [];

function salvar(){localStorage.setItem(LS_ATUAL,JSON.stringify(caixa));}

const moeda=v=>v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

function atualizar(){
  let total=0;
  caixa.forEach(m=>total+=m.tipo==="entrada"?m.valor:-m.valor);
  saldo.innerText=moeda(total);
  montarResumo();
  salvar();
}

function registrarCorrida(){
  caixa.push({tipo:"entrada",desc:`Corrida (${tipoCorrida.value} - ${plataforma.value})`,valor:Number(valorCorrida.value)});
  valorCorrida.value="";
  atualizar();
}

function registrarEntrada(){
  caixa.push({tipo:"entrada",desc:descEntrada.value,valor:Number(valorEntrada.value)});
  descEntrada.value=valorEntrada.value="";
  atualizar();
}

function registrarSaida(){
  caixa.push({tipo:"saida",desc:tipoSaida.value,valor:Number(valorSaida.value)});
  valorSaida.value="";
  atualizar();
}

function montarResumo(){
  let ent=0,sai=0;
  let html="";
  caixa.forEach(m=>{
    if(m.tipo==="entrada") ent+=m.valor; else sai+=m.valor;
    html+=`<div class="item"><span>${m.desc}</span><strong>${moeda(m.valor)}</strong></div>`;
  });
  resumoBox.innerHTML=`
    <strong>Entradas:</strong> ${moeda(ent)}<br>
    <strong>Sa√≠das:</strong> ${moeda(sai)}<br>
    <strong>Lucro:</strong> ${moeda(ent-sai)}<hr>${html}`;
}

function fecharDia(){
  const hist = JSON.parse(localStorage.getItem(LS_HIST)) || [];
  hist.push({data:new Date().toLocaleDateString(),caixa});
  localStorage.setItem(LS_HIST,JSON.stringify(hist));
  alert("Dia finalizado e salvo.");
}

function exportarWhats(){
  let msg="üìä RF Driver ‚Äì Resumo do Dia\n\n";
  caixa.forEach(m=>msg+=`${m.tipo==="entrada"?"‚ûï":"‚ûñ"} ${m.desc}: ${moeda(m.valor)}\n`);
  window.open("https://wa.me/?text="+encodeURIComponent(msg));
}

function abrirTab(tab,btn){
  document.querySelectorAll(".tab").forEach(t=>t.style.display="none");
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  document.querySelector("."+tab).style.display="block";
  btn.classList.add("active");
}

atualizar();
</script>

</body>
</html>
